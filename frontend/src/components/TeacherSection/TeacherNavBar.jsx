import React, { useRef, useEffect, useState } from 'react'
import { Movebutton } from '../Movebutton'
import { motion, AnimatePresence } from 'framer-motion'


export const TeacherNavBar = ({selected = 'classes', setSelected, setOpen, clearClass, showingClass, currentClass}) => {

    const navBarDiv = useRef(null); 
    const [openHere, setOpenHere] = useState(true);

    const handleClickOutside = (event) => {
        if (navBarDiv.current && !navBarDiv.current.contains(event.target)) {
            setOpenHere(false)
            setOpen(false);
        }
    };
    
    useEffect(() => {
        
        // document.addEventListener("mousedown", handleClickOutside);
            
        // return () => {
        //     document.removeEventListener("mousedown", handleClickOutside);
        // };    
    }, []);

    return (
      <AnimatePresence>
        {openHere && (
          <motion.div
            exit={{ opacity: 0.6, x: -100 }}
            ref={navBarDiv}
            initial={{ x: -100, opacity: 0.7 }}
            animate={{ opacity: 1, x: 0 }}
            transition={{ ease: "easeIn", duration: 0.1 }}
            className="h-screen pl-2 md:min-w-[300px]  bg-[#1a1b1f] flex flex-col outline outline-1 outline-[#212327]"
          >
            <div className="h-[40px] mt-2 pr-2 flex flex-row justify-between items-center ">
              <p className="orbitron-font">CODE FLOW</p>
            </div>

            {/* <div className="flex flex-row gap-2 items-center outline outline-1 outline-[#212327] p-2 mr-2">
              <div className="h-[40px] w-[40px] rounded-full bg-gradient-to-r from-[#3b82f6] to-[#1D478C] grid place-content-center">
                <p className="text-white font-bold text-2xl">T</p>
              </div>
              <div className="text-2xl ">
                <h1 className="text-white tracking-tighter">Tom Sebastian</h1>
                <p className="text-sm text-[#A8FF53]">active</p>
              </div>
            </div> */}

            <div className="w-full flex flex-col h-[70%] gap-2 mt-4 justify-between">
              <div className="flex flex-col gap-2">
                <button
                  onClick={() => {
                    setSelected("profile");
                    clearClass();
                  }}
                  className={`p-2 mr-2 rounded-sm flex flex-row gap-2 text-[#c1c4c7] text-lg text-start hover:bg-[#272a2e] ${
                    selected == "profile"
                      ? "bg-[#A8FF53] hover:bg-[#A8FF53] text-black"
                      : null
                  }`}
                >
                  <svg
                    width="31"
                    height="27"
                    viewBox="0 0 31 27"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M15.071 17.8973C18.9665 17.8973 22.1357 13.8832 22.1357 8.94867C22.1357 4.01418 18.9665 0 15.071 0C11.1755 0 8.00623 4.01418 8.00623 8.94867C8.00623 13.8832 11.1755 17.8973 15.071 17.8973ZM15.071 1.88393C17.8794 1.88393 20.2518 5.11911 20.2518 8.94867C20.2518 12.7782 17.8794 16.0134 15.071 16.0134C12.2625 16.0134 9.89016 12.7782 9.89016 8.94867C9.89016 5.11911 12.2625 1.88393 15.071 1.88393Z"
                      fill={selected=='profile'?"black": "white"}
                    />
                    <path
                      d="M1.93217 19.4841L0.0482419 25.1359C0.00110684 25.2775 -0.0117278 25.4283 0.0107942 25.5758C0.0333162 25.7233 0.090551 25.8634 0.177788 25.9845C0.265025 26.1056 0.379769 26.2042 0.512577 26.2723C0.645385 26.3403 0.79246 26.3759 0.941696 26.376H29.2007C29.5035 26.376 29.788 26.2305 29.9646 25.9846C30.052 25.8636 30.1093 25.7235 30.1318 25.5759C30.1544 25.4283 30.1414 25.2775 30.0941 25.1359L28.2102 19.4841C28.1617 19.3389 28.0785 19.2077 27.9679 19.1018C27.8573 18.996 27.7225 18.9186 27.5753 18.8766L20.9815 16.9926C20.755 16.9274 20.5121 16.95 20.3014 17.0557L15.0712 19.6711L9.84091 17.0557C9.63014 16.9502 9.38741 16.9277 9.16081 16.9926L2.56706 18.8766C2.41982 18.9186 2.28505 18.9959 2.17442 19.1018C2.0638 19.2076 1.98065 19.3389 1.93217 19.4841ZM9.32613 18.9048L14.6501 21.5668C14.781 21.6321 14.9252 21.6661 15.0714 21.6661C15.2176 21.6661 15.3619 21.6321 15.4927 21.5668L20.8167 18.9048L26.5806 20.5514L27.8941 24.4921H2.2482L3.56177 20.5514L9.32613 18.9048Z"
                      fill={selected=='profile'?"black": "white"}
                    />
                  </svg>{" "}
                  profile
                </button>
                <button
                  onClick={() => {
                    if (showingClass) {
                      setSelected("classes");
                      clearClass();
                    } else {
                      setSelected("classes");
                    }
                  }}
                  className={`flex flex-row gap-2 p-2 mr-2 rounded-sm text-[#c1c4c7] text-lg text-start hover:bg-[#272a2e] ${
                    selected == "classes" && !showingClass
                      ? "bg-[#A8FF53] hover:bg-[#A8FF53] text-black"
                      : null
                  }`}
                ><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_138_126)">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M16 0C11.7565 0 7.68687 1.68571 4.68629 4.68629C1.68571 7.68687 0 11.7565 0 16C0 20.2435 1.68571 24.3131 4.68629 27.3137C7.68687 30.3143 11.7565 32 16 32C20.2435 32 24.3131 30.3143 27.3137 27.3137C30.3143 24.3131 32 20.2435 32 16C32 11.7565 30.3143 7.68687 27.3137 4.68629C24.3131 1.68571 20.2435 0 16 0ZM16 8.448C16.4311 8.44888 16.8444 8.62054 17.1493 8.92541C17.4541 9.23028 17.6258 9.64352 17.6267 10.0747C17.6254 10.5056 17.4536 10.9185 17.1488 11.2231C16.844 11.5276 16.4309 11.6991 16 11.7C15.5689 11.6991 15.1556 11.5275 14.8507 11.2226C14.5459 10.9177 14.3742 10.5045 14.3733 10.0733C14.3742 9.64219 14.5459 9.22895 14.8507 8.92408C15.1556 8.61921 15.5689 8.44755 16 8.44667V8.448ZM16 9.11467C15.4627 9.11467 15.04 9.53667 15.04 10.0747C15.04 10.6113 15.4627 11.034 16 11.034C16.5373 11.034 16.96 10.6113 16.96 10.074C16.96 9.53667 16.5373 9.114 16 9.114V9.11467ZM12.6667 11.034C13.0978 11.0349 13.5111 11.2065 13.8159 11.5114C14.1208 11.8163 14.2925 12.2295 14.2933 12.6607C14.2923 13.0917 14.1205 13.5048 13.8157 13.8095C13.5108 14.1142 13.0977 14.2858 12.6667 14.2867C12.2355 14.2858 11.8223 14.1141 11.5174 13.8093C11.2125 13.5044 11.0409 13.0911 11.04 12.66C11.0409 12.2289 11.2125 11.8156 11.5174 11.5107C11.8223 11.2059 12.2355 11.0342 12.6667 11.0333V11.034ZM19.3733 11.034C19.8045 11.0349 20.2177 11.2065 20.5226 11.5114C20.8275 11.8163 20.9991 12.2295 21 12.6607C20.9989 13.0917 20.8272 13.5048 20.5224 13.8095C20.2175 14.1142 19.8044 14.2858 19.3733 14.2867C18.9423 14.2856 18.5292 14.1139 18.2245 13.809C17.9198 13.5042 17.7482 13.091 17.7473 12.66C17.7482 12.2289 17.9199 11.8156 18.2247 11.5107C18.5296 11.2059 18.9429 11.0342 19.374 11.0333L19.3733 11.034ZM12.6667 11.7007C12.1293 11.7007 11.7067 12.1227 11.7067 12.6607C11.7067 13.1973 12.1293 13.62 12.6667 13.62C13.204 13.62 13.6267 13.1973 13.6267 12.66C13.6267 12.1227 13.204 11.7 12.6667 11.7V11.7007ZM19.3733 11.7007C18.836 11.7007 18.414 12.1227 18.414 12.6607C18.414 13.1973 18.8367 13.62 19.374 13.62C19.9113 13.62 20.3333 13.1973 20.3333 12.66C20.3333 12.1227 19.9113 11.7 19.3733 11.7V11.7007ZM9.33333 13.082C9.76448 13.0829 10.1777 13.2545 10.4826 13.5594C10.7875 13.8643 10.9591 14.2775 10.96 14.7087C10.9588 15.1395 10.7869 15.5523 10.4821 15.8568C10.1772 16.1613 9.76419 16.3326 9.33333 16.3333C8.90236 16.3326 8.48922 16.1612 8.18436 15.8566C7.87949 15.552 7.70772 15.139 7.70667 14.708C7.70772 14.277 7.87946 13.8639 8.18431 13.5592C8.48916 13.2545 8.9023 13.0829 9.33333 13.082ZM16 13.082C16.4311 13.0829 16.8444 13.2545 17.1493 13.5594C17.4541 13.8643 17.6258 14.2775 17.6267 14.7087C17.6254 15.1395 17.4536 15.5523 17.1487 15.8568C16.8439 16.1613 16.4309 16.3326 16 16.3333C15.569 16.3326 15.1559 16.1612 14.851 15.8566C14.5462 15.552 14.3744 15.139 14.3733 14.708C14.3744 14.277 14.5461 13.8639 14.851 13.5592C15.1558 13.2545 15.569 13.0829 16 13.082ZM22.6667 13.082C23.0978 13.0829 23.5111 13.2545 23.8159 13.5594C24.1208 13.8643 24.2925 14.2775 24.2933 14.7087C24.2921 15.1395 24.1203 15.5523 23.8154 15.8568C23.5106 16.1613 23.0975 16.3326 22.6667 16.3333C22.2357 16.3326 21.8226 16.1612 21.5177 15.8566C21.2128 15.552 21.0411 15.139 21.04 14.708C21.0411 14.277 21.2128 13.8639 21.5176 13.5592C21.8225 13.2545 22.2356 13.0829 22.6667 13.082ZM9.33333 13.7487C8.796 13.7487 8.37333 14.1707 8.37333 14.7087C8.37333 15.246 8.796 15.6667 9.33333 15.6667C9.87067 15.6667 10.2933 15.246 10.2933 14.708C10.2933 14.1707 9.87067 13.7487 9.33333 13.7487ZM16 13.7487C15.4627 13.7487 15.04 14.1707 15.04 14.7087C15.04 15.246 15.4627 15.6667 16 15.6667C16.5373 15.6667 16.96 15.246 16.96 14.708C16.96 14.1707 16.5373 13.7487 16 13.7487ZM22.6667 13.7487C22.1293 13.7487 21.7067 14.1707 21.7067 14.7087C21.7067 15.246 22.1293 15.6667 22.6667 15.6667C23.204 15.6667 23.6267 15.246 23.6267 14.708C23.6267 14.1707 23.204 13.7487 22.6667 13.7487ZM8.12133 16.7047H10.5453C11.0192 16.7055 11.4733 16.8941 11.8084 17.2291C12.1435 17.5641 12.3323 18.0182 12.3333 18.492V20.6667H6.33333V18.492C6.33439 18.0182 6.52313 17.5641 6.85823 17.2291C7.19334 16.8941 7.64751 16.7055 8.12133 16.7047ZM14.788 16.7047H17.212C17.6858 16.7055 18.14 16.8941 18.4751 17.2291C18.8102 17.5641 18.9989 18.0182 19 18.492V20.6667H13V18.492C13.0011 18.0182 13.1898 17.5641 13.5249 17.2291C13.86 16.8941 14.3142 16.7055 14.788 16.7047ZM21.4547 16.7047H23.8787C24.3525 16.7055 24.8067 16.8941 25.1418 17.2291C25.4769 17.5641 25.6656 18.0182 25.6667 18.492V20.6667H19.6667V18.492C19.6677 18.0182 19.8565 17.5641 20.1916 17.2291C20.5267 16.8941 20.9808 16.7055 21.4547 16.7047ZM8.12133 17.3713C7.49467 17.3713 7 17.8653 7 18.492V20H11.6667V18.492C11.6667 17.8653 11.1727 17.3713 10.5453 17.3713H8.12133ZM14.788 17.3713C14.1613 17.3713 13.6667 17.8653 13.6667 18.492V20H18.3333V18.492C18.3333 17.8653 17.8393 17.3713 17.212 17.3713H14.788ZM21.4547 17.3713C20.828 17.3713 20.3333 17.8653 20.3333 18.492V20H25V18.492C25 17.8653 24.506 17.3713 23.8787 17.3713H21.4547Z" fill={selected =='classes' && !showingClass ?"black":"white"}/>
                </g>
                <defs>
                <clipPath id="clip0_138_126">
                <rect width="32" height="32" fill="white"/>
                </clipPath>
                </defs>
                </svg>
                  classes
                </button>
                {showingClass && (
                  <button
                    className={`p-2 mr-2 rounded-sm text-[#c1c4c7] text-lg text-start hover:bg-[#272a2e] ${
                      showingClass
                        ? "bg-[#A8FF53] hover:bg-[#A8FF53] text-black"
                        : null
                    }`}
                  >
                    📓{currentClass.className}
                  </button>
                )}
              </div>
            </div>

            <div className="h-full w-full flex flex-col justify-end mb-2">
              <button
                className={`p-2 mr-2 rounded-sm text-[#f43f5e] text-lg text-start tracking-tighter hover:bg-[#f43f5e] hover:text-black`}
              >
                log out
              </button>
            </div>
          </motion.div>
        )}
        {!openHere && (
          <div className="h-screen min-w-[100px] bg-[#1a1b1f]   flex flex-col outline outline-1 outline-[#212327] py-6 items-center">
            <div
              onClick={() => {
                setOpenHere(true);
                setOpen(true);
              }}
              className="hover:bg-[#A8FF53] text-[#c1c4c7] hover:text-black h-[40px] w-[40px] rounded-sm bg-[#272a2e] grid place-content-center"
            >
              <p className="text-2xl">☰</p>
            </div>
          </div>
        )}
      </AnimatePresence>
    );
}
